<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>list_nav_landmark_20260124_095326</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
        #map { width: 100%; height: 100vh; }
        .info-panel {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            max-width: 300px;
        }
        .info-panel h3 { margin: 0 0 10px 0; }
        .legend {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-top: 10px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        .selected-info {
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div class="info-panel">
        <h3>list_nav_landmark_20260124_095326</h3>
        <div>Total Panos: <strong>70</strong></div>
        <div>Spawn Points: <strong>4</strong></div>
        <div class="legend">
            <div class="legend-item">
                <div class="legend-dot" style="background: #e74c3c;"></div>
                <span>Target</span>
            </div>
            <div class="legend-item">
                <div class="legend-dot" style="background: #3498db;"></div>
                <span>Spawn Point</span>
            </div>
            <div class="legend-item">
                <div class="legend-dot" style="background: #95a5a6;"></div>
                <span>Panorama</span>
            </div>
            <div class="legend-item">
                <div class="legend-dot" style="background: #2ecc71;"></div>
                <span>Connected (click)</span>
            </div>
        </div>
        <div class="selected-info" id="selected-info">
            Click a point to see connections
        </div>
    </div>
    
    <script>
        // Data
        const panoData = {"8z9-5DpCmlF4dS5CTzm8HA": {"lat": 43.0558221319176, "lng": 141.3509745890498, "links": [{"pano_id": "9fxXwFgX5TiWO--vYP4iew", "heading": 79.54624, "description": ""}, {"pano_id": "oJDx6ign8fALqd-sRmCCSA", "heading": 259.55017, "description": ""}]}, "9fxXwFgX5TiWO--vYP4iew": {"lat": 43.05584413341327, "lng": 141.3511377864468, "links": [{"pano_id": "8z9-5DpCmlF4dS5CTzm8HA", "heading": 259.54623, "description": ""}, {"pano_id": "WnR4WWYQGPNtkRtCDIQ8iA", "heading": 79.53625, "description": ""}, {"pano_id": "LlAFCbvcon9oFAzHt3YVzQ", "heading": 79.52, "distance": 17.71, "virtual": true}]}, "oJDx6ign8fALqd-sRmCCSA": {"lat": 43.05580728352734, "lng": 141.350864407949, "links": [{"pano_id": "8z9-5DpCmlF4dS5CTzm8HA", "heading": 79.55017, "description": ""}, {"pano_id": "kvAEHzwHX33Jut9F5_shaQ", "heading": 259.54642, "description": ""}]}, "WnR4WWYQGPNtkRtCDIQ8iA": {"lat": 43.05585868733107, "lng": 141.3512456355583, "links": [{"pano_id": "9fxXwFgX5TiWO--vYP4iew", "heading": 259.53625, "description": ""}, {"pano_id": "LlAFCbvcon9oFAzHt3YVzQ", "heading": 79.51238, "description": ""}]}, "kvAEHzwHX33Jut9F5_shaQ": {"lat": 43.0557853640465, "lng": 141.3507018162427, "links": [{"pano_id": "FhEms4peh6qiLpsYa_Byng", "heading": 259.52512, "description": ""}, {"pano_id": "oJDx6ign8fALqd-sRmCCSA", "heading": 79.54642, "description": ""}]}, "LlAFCbvcon9oFAzHt3YVzQ": {"lat": 43.0558730887017, "lng": 141.3513521059016, "links": [{"pano_id": "hCCoypBGNxQbnOjqw9aVYA", "heading": 79.54814, "description": ""}, {"pano_id": "WnR4WWYQGPNtkRtCDIQ8iA", "heading": 259.5124, "description": ""}, {"pano_id": "9fxXwFgX5TiWO--vYP4iew", "heading": 259.52, "distance": 17.71, "virtual": true}]}, "FhEms4peh6qiLpsYa_Byng": {"lat": 43.05576362000491, "lng": 141.3505408612037, "links": [{"pano_id": "nl4nVJA3xocdf_nskReKpw", "heading": 259.5491, "description": ""}, {"pano_id": "kvAEHzwHX33Jut9F5_shaQ", "heading": 79.52512, "description": ""}]}, "hCCoypBGNxQbnOjqw9aVYA": {"lat": 43.05588826652502, "lng": 141.3514647093082, "links": [{"pano_id": "LlAFCbvcon9oFAzHt3YVzQ", "heading": 259.54816, "description": ""}, {"pano_id": "3veddPenWFFvbE2imHI0xw", "heading": 79.53422, "description": ""}, {"pano_id": "I2Ua5HRxwrag6vNYhtcfjA", "heading": 72.75, "distance": 16.43, "virtual": true}, {"pano_id": "-PojLbX2K8vQYtzZlvAHsg", "heading": 89.8, "distance": 16.56, "virtual": true}]}, "nl4nVJA3xocdf_nskReKpw": {"lat": 43.05574227754642, "lng": 141.3503825083611, "links": [{"pano_id": "FhEms4peh6qiLpsYa_Byng", "heading": 79.549095, "description": ""}, {"pano_id": "pyhiRl_YGZoD5lxqBpAbDQ", "heading": 259.511, "description": ""}]}, "3veddPenWFFvbE2imHI0xw": {"lat": 43.05590441099649, "lng": 141.3515843213207, "links": [{"pano_id": "hCCoypBGNxQbnOjqw9aVYA", "heading": 259.5342, "description": ""}, {"pano_id": "I2Ua5HRxwrag6vNYhtcfjA", "heading": 62.757423, "description": ""}, {"pano_id": "-PojLbX2K8vQYtzZlvAHsg", "heading": 104.25, "distance": 7.06, "virtual": true}, {"pano_id": "XtbYGPfMKGQ0QY3lBXU7MA", "heading": 79.53, "distance": 9.71, "virtual": true}, {"pano_id": "vx5PffqBIWzFxj7p1Ib59w", "heading": 22.29, "distance": 11.88, "virtual": true}, {"pano_id": "vVcZ0MVVRYhAN7pGtRPgvg", "heading": 143.46, "distance": 14.39, "virtual": true}]}, "pyhiRl_YGZoD5lxqBpAbDQ": {"lat": 43.05572293662431, "lng": 141.3502395392201, "links": [{"pano_id": "nl4nVJA3xocdf_nskReKpw", "heading": 79.510994, "description": ""}, {"pano_id": "HqgJbR2ihgcbyey67h6CPA", "heading": 259.54068, "description": ""}, {"pano_id": "EhKmf6U_WQBhYsSyPwoO8w", "heading": 240.25, "distance": 14.28, "virtual": true}, {"pano_id": "m-z3vgykFMOrSMxVCqoDjA", "heading": 285.81, "distance": 15.06, "virtual": true}]}, "HqgJbR2ihgcbyey67h6CPA": {"lat": 43.05570567101373, "lng": 141.3501115404808, "links": [{"pano_id": "-1n5Al4TNiZt5wwt99SonQ", "heading": 259.5692, "description": ""}, {"pano_id": "pyhiRl_YGZoD5lxqBpAbDQ", "heading": 79.54068, "description": ""}, {"pano_id": "EhKmf6U_WQBhYsSyPwoO8w", "heading": 201.16656, "description": "\u897f6\u4e01\u76ee\u901a"}, {"pano_id": "m-z3vgykFMOrSMxVCqoDjA", "heading": 325.79376, "description": ""}, {"pano_id": "SbcSCCdZN2mRCqTHkYac5g", "heading": 339.22, "distance": 16.47, "virtual": true}, {"pano_id": "LJ7VLgKTYBKJC_vn3oANzw", "heading": 180.99, "distance": 14.44, "virtual": true}]}, "I2Ua5HRxwrag6vNYhtcfjA": {"lat": 43.05593207940363, "lng": 141.351657866604, "links": [{"pano_id": "XtbYGPfMKGQ0QY3lBXU7MA", "heading": 110.14968, "description": "\u90fd\u901a\u308a"}, {"pano_id": "3veddPenWFFvbE2imHI0xw", "heading": 242.75743, "description": ""}, {"pano_id": "vx5PffqBIWzFxj7p1Ib59w", "heading": 349.49118, "description": ""}, {"pano_id": "-PojLbX2K8vQYtzZlvAHsg", "heading": 169.78558, "description": ""}, {"pano_id": "hCCoypBGNxQbnOjqw9aVYA", "heading": 252.75, "distance": 16.43, "virtual": true}, {"pano_id": "JbQoezeyG-piZ4Y9fla2zQ", "heading": 349.47, "distance": 17.86, "virtual": true}, {"pano_id": "bKGt4mAxHMLpRcHyLHB9zQ", "heading": 87.77, "distance": 13.46, "virtual": true}, {"pano_id": "vVcZ0MVVRYhAN7pGtRPgvg", "heading": 169.95, "distance": 14.87, "virtual": true}]}, "-PojLbX2K8vQYtzZlvAHsg": {"lat": 43.05588878349938, "lng": 141.3516685434113, "links": [{"pano_id": "vVcZ0MVVRYhAN7pGtRPgvg", "heading": 170.02878, "description": ""}, {"pano_id": "I2Ua5HRxwrag6vNYhtcfjA", "heading": 349.78558, "description": ""}, {"pano_id": "hCCoypBGNxQbnOjqw9aVYA", "heading": 269.8, "distance": 16.56, "virtual": true}, {"pano_id": "3veddPenWFFvbE2imHI0xw", "heading": 284.25, "distance": 7.06, "virtual": true}, {"pano_id": "XtbYGPfMKGQ0QY3lBXU7MA", "heading": 37.7, "distance": 4.43, "virtual": true}, {"pano_id": "vx5PffqBIWzFxj7p1Ib59w", "heading": 349.6, "distance": 12.94, "virtual": true}, {"pano_id": "bKGt4mAxHMLpRcHyLHB9zQ", "heading": 67.01, "distance": 13.67, "virtual": true}]}, "EhKmf6U_WQBhYsSyPwoO8w": {"lat": 43.05565918260302, "lng": 141.3500869056185, "links": [{"pano_id": "HqgJbR2ihgcbyey67h6CPA", "heading": 21.166563, "description": ""}, {"pano_id": "LJ7VLgKTYBKJC_vn3oANzw", "heading": 169.28549, "description": "\u897f6\u4e01\u76ee\u901a"}, {"pano_id": "pyhiRl_YGZoD5lxqBpAbDQ", "heading": 60.25, "distance": 14.28, "virtual": true}, {"pano_id": "-1n5Al4TNiZt5wwt99SonQ", "heading": 295.51, "distance": 8.04, "virtual": true}, {"pano_id": "m-z3vgykFMOrSMxVCqoDjA", "heading": 349.41, "distance": 11.39, "virtual": true}, {"pano_id": "Z15zz81pTZCe97-vGROszQ", "heading": 275.19, "distance": 17.51, "virtual": true}]}, "XtbYGPfMKGQ0QY3lBXU7MA": {"lat": 43.0559202844859, "lng": 141.3517018590436, "links": [{"pano_id": "bKGt4mAxHMLpRcHyLHB9zQ", "heading": 79.46653, "description": "\u90fd\u901a\u308a"}, {"pano_id": "I2Ua5HRxwrag6vNYhtcfjA", "heading": 290.1497, "description": ""}, {"pano_id": "3veddPenWFFvbE2imHI0xw", "heading": 259.53, "distance": 9.71, "virtual": true}, {"pano_id": "-PojLbX2K8vQYtzZlvAHsg", "heading": 217.7, "distance": 4.43, "virtual": true}, {"pano_id": "vx5PffqBIWzFxj7p1Ib59w", "heading": 331.35, "distance": 10.52, "virtual": true}, {"pano_id": "vVcZ0MVVRYhAN7pGtRPgvg", "heading": 184.2, "distance": 13.37, "virtual": true}, {"pano_id": "3XLakhGFnqlo3hOOWjvcew", "heading": 79.46, "distance": 17.59, "virtual": true}]}, "-1n5Al4TNiZt5wwt99SonQ": {"lat": 43.05569033904877, "lng": 141.3499975588357, "links": [{"pano_id": "Z15zz81pTZCe97-vGROszQ", "heading": 259.53555, "description": ""}, {"pano_id": "HqgJbR2ihgcbyey67h6CPA", "heading": 79.56922, "description": ""}, {"pano_id": "EhKmf6U_WQBhYsSyPwoO8w", "heading": 115.51, "distance": 8.04, "virtual": true}, {"pano_id": "m-z3vgykFMOrSMxVCqoDjA", "heading": 33.76, "distance": 9.3, "virtual": true}, {"pano_id": "SbcSCCdZN2mRCqTHkYac5g", "heading": 11.3, "distance": 17.44, "virtual": true}, {"pano_id": "LJ7VLgKTYBKJC_vn3oANzw", "heading": 144.7, "distance": 15.6, "virtual": true}]}, "m-z3vgykFMOrSMxVCqoDjA": {"lat": 43.05575984212366, "lng": 141.3500611452804, "links": [{"pano_id": "HqgJbR2ihgcbyey67h6CPA", "heading": 145.79376, "description": ""}, {"pano_id": "SbcSCCdZN2mRCqTHkYac5g", "heading": 349.43417, "description": ""}, {"pano_id": "pyhiRl_YGZoD5lxqBpAbDQ", "heading": 105.81, "distance": 15.06, "virtual": true}, {"pano_id": "EhKmf6U_WQBhYsSyPwoO8w", "heading": 169.41, "distance": 11.39, "virtual": true}, {"pano_id": "-1n5Al4TNiZt5wwt99SonQ", "heading": 213.76, "distance": 9.3, "virtual": true}]}, "vx5PffqBIWzFxj7p1Ib59w": {"lat": 43.05600327914041, "lng": 141.3516397912393, "links": [{"pano_id": "JbQoezeyG-piZ4Y9fla2zQ", "heading": 349.4471, "description": ""}, {"pano_id": "I2Ua5HRxwrag6vNYhtcfjA", "heading": 169.49118, "description": ""}, {"pano_id": "3veddPenWFFvbE2imHI0xw", "heading": 202.29, "distance": 11.88, "virtual": true}, {"pano_id": "-PojLbX2K8vQYtzZlvAHsg", "heading": 169.6, "distance": 12.94, "virtual": true}, {"pano_id": "XtbYGPfMKGQ0QY3lBXU7MA", "heading": 151.35, "distance": 10.52, "virtual": true}, {"pano_id": "bKGt4mAxHMLpRcHyLHB9zQ", "heading": 116.36, "distance": 16.65, "virtual": true}]}, "JbQoezeyG-piZ4Y9fla2zQ": {"lat": 43.05608997014895, "lng": 141.3516176887031, "links": [{"pano_id": "SY385xEQ0xem1jo0hMwaLQ", "heading": 349.4289, "description": ""}, {"pano_id": "vx5PffqBIWzFxj7p1Ib59w", "heading": 169.44711, "description": ""}, {"pano_id": "I2Ua5HRxwrag6vNYhtcfjA", "heading": 169.47, "distance": 17.86, "virtual": true}]}, "Z15zz81pTZCe97-vGROszQ": {"lat": 43.05567342647583, "lng": 141.3498722400636, "links": [{"pano_id": "GWIWGv-UUV41LRxkT6Xuzw", "heading": 259.55692, "description": ""}, {"pano_id": "-1n5Al4TNiZt5wwt99SonQ", "heading": 79.53556, "description": ""}, {"pano_id": "EhKmf6U_WQBhYsSyPwoO8w", "heading": 95.19, "distance": 17.51, "virtual": true}]}, "bKGt4mAxHMLpRcHyLHB9zQ": {"lat": 43.05593679647092, "lng": 141.3518233899943, "links": [{"pano_id": "XtbYGPfMKGQ0QY3lBXU7MA", "heading": 259.46652, "description": "\u90fd\u901a\u308a"}, {"pano_id": "3XLakhGFnqlo3hOOWjvcew", "heading": 79.45675, "description": "\u90fd\u901a\u308a"}, {"pano_id": "I2Ua5HRxwrag6vNYhtcfjA", "heading": 267.77, "distance": 13.46, "virtual": true}, {"pano_id": "-PojLbX2K8vQYtzZlvAHsg", "heading": 247.01, "distance": 13.67, "virtual": true}, {"pano_id": "vx5PffqBIWzFxj7p1Ib59w", "heading": 296.36, "distance": 16.65, "virtual": true}]}, "vVcZ0MVVRYhAN7pGtRPgvg": {"lat": 43.05580040664049, "lng": 141.3516898075337, "links": [{"pano_id": "LTjIvg3plbtzx_t73iFiPA", "heading": 170.1055, "description": ""}, {"pano_id": "-PojLbX2K8vQYtzZlvAHsg", "heading": 350.02878, "description": ""}, {"pano_id": "3veddPenWFFvbE2imHI0xw", "heading": 323.46, "distance": 14.39, "virtual": true}, {"pano_id": "I2Ua5HRxwrag6vNYhtcfjA", "heading": 349.95, "distance": 14.87, "virtual": true}, {"pano_id": "XtbYGPfMKGQ0QY3lBXU7MA", "heading": 4.2, "distance": 13.37, "virtual": true}]}, "SbcSCCdZN2mRCqTHkYac5g": {"lat": 43.05584414162227, "lng": 141.3500396255857, "links": [{"pano_id": "z8KoanGVsvCirM_9Hr5PEQ", "heading": 349.47324, "description": ""}, {"pano_id": "m-z3vgykFMOrSMxVCqoDjA", "heading": 169.43416, "description": ""}, {"pano_id": "HqgJbR2ihgcbyey67h6CPA", "heading": 159.22, "distance": 16.47, "virtual": true}, {"pano_id": "-1n5Al4TNiZt5wwt99SonQ", "heading": 191.3, "distance": 17.44, "virtual": true}]}, "LJ7VLgKTYBKJC_vn3oANzw": {"lat": 43.05557586048121, "lng": 141.3501084820677, "links": [{"pano_id": "eszPvzP_2879B2vUJ_RZYg", "heading": 169.27193, "description": "\u897f6\u4e01\u76ee\u901a"}, {"pano_id": "EhKmf6U_WQBhYsSyPwoO8w", "heading": 349.2855, "description": "\u897f6\u4e01\u76ee\u901a"}, {"pano_id": "HqgJbR2ihgcbyey67h6CPA", "heading": 0.99, "distance": 14.44, "virtual": true}, {"pano_id": "-1n5Al4TNiZt5wwt99SonQ", "heading": 324.7, "distance": 15.6, "virtual": true}]}, "SY385xEQ0xem1jo0hMwaLQ": {"lat": 43.05619201961172, "lng": 141.3515916244598, "links": [{"pano_id": "bUWx5c6HnWvGR30NGC0w1Q", "heading": 349.424, "description": ""}, {"pano_id": "JbQoezeyG-piZ4Y9fla2zQ", "heading": 169.42891, "description": ""}]}, "3XLakhGFnqlo3hOOWjvcew": {"lat": 43.05594921892943, "lng": 141.3519147346274, "links": [{"pano_id": "bKGt4mAxHMLpRcHyLHB9zQ", "heading": 259.45676, "description": "\u90fd\u901a\u308a"}, {"pano_id": "LUt5df31i_PMyQtfIOcGHw", "heading": 79.4603, "description": "\u90fd\u901a\u308a"}, {"pano_id": "XtbYGPfMKGQ0QY3lBXU7MA", "heading": 259.46, "distance": 17.59, "virtual": true}]}, "eszPvzP_2879B2vUJ_RZYg": {"lat": 43.05546429760513, "lng": 141.350137408921, "links": [{"pano_id": "-bAn1p9oqd6pql0plPK7LA", "heading": 169.25822, "description": "\u897f6\u4e01\u76ee\u901a"}, {"pano_id": "LJ7VLgKTYBKJC_vn3oANzw", "heading": 349.27194, "description": "\u897f6\u4e01\u76ee\u901a"}, {"pano_id": "ezv9y8iWZBoTrSJpPR321w", "heading": 183.88, "distance": 17.02, "virtual": true}, {"pano_id": "uRE8V0CqIA30241r0i6fUA", "heading": 153.34, "distance": 17.05, "virtual": true}]}, "LTjIvg3plbtzx_t73iFiPA": {"lat": 43.05571756004713, "lng": 141.3517095845361, "links": [{"pano_id": "Ns59_RBp1XqxlR-v2J6d1Q", "heading": 170.02153, "description": ""}, {"pano_id": "vVcZ0MVVRYhAN7pGtRPgvg", "heading": 350.1055, "description": ""}, {"pano_id": "OWG60swIRYTP38r8jsbksg", "heading": 170.05, "distance": 17.65, "virtual": true}]}, "GWIWGv-UUV41LRxkT6Xuzw": {"lat": 43.05565753987319, "lng": 141.3497542776222, "links": [{"pano_id": "Z15zz81pTZCe97-vGROszQ", "heading": 79.5569, "description": ""}, {"pano_id": "7OxYQ1JW0ZBkyXYJjGGc2Q", "heading": 259.58398, "description": ""}]}, "z8KoanGVsvCirM_9Hr5PEQ": {"lat": 43.05593013137062, "lng": 141.35001775741, "links": [{"pano_id": "SbcSCCdZN2mRCqTHkYac5g", "heading": 169.47324, "description": ""}, {"pano_id": "9vYbfGXtoUpeVIBYhmQCaA", "heading": 349.41064, "description": ""}]}, "-bAn1p9oqd6pql0plPK7LA": {"lat": 43.05538258152394, "lng": 141.3501586245503, "links": [{"pano_id": "eszPvzP_2879B2vUJ_RZYg", "heading": 349.25824, "description": "\u897f6\u4e01\u76ee\u901a"}, {"pano_id": "albK65JFoPx1FeudiMaYdA", "heading": 169.47115, "description": ""}, {"pano_id": "ezv9y8iWZBoTrSJpPR321w", "heading": 200.02, "distance": 8.4, "virtual": true}, {"pano_id": "uRE8V0CqIA30241r0i6fUA", "heading": 136.08, "distance": 8.54, "virtual": true}, {"pano_id": "l89RMJlBSnnt6FGhILaw3A", "heading": 105.56, "distance": 15.72, "virtual": true}]}, "Ns59_RBp1XqxlR-v2J6d1Q": {"lat": 43.05563317976439, "lng": 141.3517299020521, "links": [{"pano_id": "LTjIvg3plbtzx_t73iFiPA", "heading": 350.02155, "description": ""}, {"pano_id": "OWG60swIRYTP38r8jsbksg", "heading": 170.08887, "description": ""}, {"pano_id": "RVglXjFXjlE8H3wQaEa-8A", "heading": 169.09, "distance": 11.32, "virtual": true}, {"pano_id": "bcNoj4e44FpX4U2GaaKBmA", "heading": 175.47, "distance": 11.34, "virtual": true}, {"pano_id": "dL6GvR3Vve1XORse6_bz2Q", "heading": 124.16, "distance": 16.03, "virtual": true}, {"pano_id": "9198eDdHq1KqZynOchGhWw", "heading": 170.2, "distance": 12.09, "virtual": true}, {"pano_id": "iaghHrheW9GJpLCG0gVi_g", "heading": 211.9, "distance": 14.85, "virtual": true}]}, "bUWx5c6HnWvGR30NGC0w1Q": {"lat": 43.05628028080287, "lng": 141.3515690711488, "links": [{"pano_id": "SY385xEQ0xem1jo0hMwaLQ", "heading": 169.42401, "description": ""}, {"pano_id": "qy44vhfo4MYALtNszxtp6A", "heading": 349.74353, "description": ""}]}, "7OxYQ1JW0ZBkyXYJjGGc2Q": {"lat": 43.05564216083759, "lng": 141.3496397806071, "links": [{"pano_id": "GWIWGv-UUV41LRxkT6Xuzw", "heading": 79.58397, "description": ""}, {"pano_id": "FB1puTM0SbBH_z66rHZGKw", "heading": 259.5626, "description": ""}]}, "9vYbfGXtoUpeVIBYhmQCaA": {"lat": 43.05601600098385, "lng": 141.3499957869064, "links": [{"pano_id": "Pt-XCNnmOCWtw-FeGmhmHQ", "heading": 349.44162, "description": ""}, {"pano_id": "z8KoanGVsvCirM_9Hr5PEQ", "heading": 169.41063, "description": ""}, {"pano_id": "rPxVuSF9zcMn9ZN9pSn_rQ", "heading": 349.45, "distance": 16.96, "virtual": true}]}, "LUt5df31i_PMyQtfIOcGHw": {"lat": 43.05597035087533, "lng": 141.3520701752333, "links": [{"pano_id": "pQeXRw68zfRq0lpq6wX2GA", "heading": 79.46581, "description": "\u90fd\u901a\u308a"}, {"pano_id": "3XLakhGFnqlo3hOOWjvcew", "heading": 259.4603, "description": "\u90fd\u901a\u308a"}]}, "OWG60swIRYTP38r8jsbksg": {"lat": 43.05556123549903, "lng": 141.351747105876, "links": [{"pano_id": "Ns59_RBp1XqxlR-v2J6d1Q", "heading": 350.08887, "description": ""}, {"pano_id": "RVglXjFXjlE8H3wQaEa-8A", "heading": 166.54483, "description": "\u6708\u5bd2\u901a"}, {"pano_id": "LTjIvg3plbtzx_t73iFiPA", "heading": 350.05, "distance": 17.65, "virtual": true}, {"pano_id": "bcNoj4e44FpX4U2GaaKBmA", "heading": 188.63, "distance": 3.35, "virtual": true}, {"pano_id": "dL6GvR3Vve1XORse6_bz2Q", "heading": 94.83, "distance": 11.91, "virtual": true}, {"pano_id": "9198eDdHq1KqZynOchGhWw", "heading": 170.42, "distance": 3.97, "virtual": true}, {"pano_id": "iaghHrheW9GJpLCG0gVi_g", "heading": 243.52, "distance": 10.33, "virtual": true}, {"pano_id": "JqLZgFshR3cFoMsMHOpgYw", "heading": 171.46, "distance": 12.29, "virtual": true}]}, "Pt-XCNnmOCWtw-FeGmhmHQ": {"lat": 43.05609525406263, "lng": 141.3499755699504, "links": [{"pano_id": "rPxVuSF9zcMn9ZN9pSn_rQ", "heading": 349.46808, "description": ""}, {"pano_id": "9vYbfGXtoUpeVIBYhmQCaA", "heading": 169.4416, "description": ""}]}, "qy44vhfo4MYALtNszxtp6A": {"lat": 43.05638326994946, "lng": 141.3515435669337, "links": [{"pano_id": "bUWx5c6HnWvGR30NGC0w1Q", "heading": 169.74353, "description": ""}, {"pano_id": "QdC0VhLApv0M6Uo4CluWMg", "heading": 351.14688, "description": ""}, {"pano_id": "LVRUdPE6aIuKCXeH5WEU2Q", "heading": 350.68, "distance": 11.81, "virtual": true}, {"pano_id": "-_8MWmM0SaxuPL3oBy4wow", "heading": 350.64, "distance": 17.43, "virtual": true}, {"pano_id": "tmnPOzAsWtbBeUgWIipktA", "heading": 310.93, "distance": 15.11, "virtual": true}]}, "albK65JFoPx1FeudiMaYdA": {"lat": 43.05530063757858, "lng": 141.3501794678568, "links": [{"pano_id": "-bAn1p9oqd6pql0plPK7LA", "heading": 349.47116, "description": "\u897f6\u4e01\u76ee\u901a"}, {"pano_id": "HyT4IvtkSnnOfRgD1O3hKg", "heading": 170.17409, "description": ""}, {"pano_id": "ezv9y8iWZBoTrSJpPR321w", "heading": 284.9396, "description": "\u6708\u5bd2\u901a"}, {"pano_id": "uRE8V0CqIA30241r0i6fUA", "heading": 55.06779, "description": "\u6708\u5bd2\u901a"}, {"pano_id": "cQBmUVIkgo1Gikb8fQFTpA", "heading": 177.99, "distance": 16.96, "virtual": true}, {"pano_id": "l89RMJlBSnnt6FGhILaw3A", "heading": 70.01, "distance": 14.31, "virtual": true}, {"pano_id": "YEKzH46gDOHH6swewioIlQ", "heading": 266.43, "distance": 17.0, "virtual": true}, {"pano_id": "gV51EjT1b5GW9SPzOmB1Vw", "heading": 161.8, "distance": 16.91, "virtual": true}]}, "pQeXRw68zfRq0lpq6wX2GA": {"lat": 43.05599175336124, "lng": 141.3522276902771, "links": [{"pano_id": "LUt5df31i_PMyQtfIOcGHw", "heading": 259.46582, "description": "\u90fd\u901a\u308a"}, {"pano_id": "FnACkLDLvS2qR7m2LhkTCw", "heading": 79.45394, "description": "\u90fd\u901a\u308a"}]}, "FB1puTM0SbBH_z66rHZGKw": {"lat": 43.05562701662248, "lng": 141.349527267966, "links": [{"pano_id": "7OxYQ1JW0ZBkyXYJjGGc2Q", "heading": 79.56259, "description": ""}, {"pano_id": "AJ_6mEG_CmcKExdVczHc3w", "heading": 259.5305, "description": ""}]}, "RVglXjFXjlE8H3wQaEa-8A": {"lat": 43.05553324189597, "lng": 141.3517562718536, "links": [{"pano_id": "9198eDdHq1KqZynOchGhWw", "heading": 186.05186, "description": ""}, {"pano_id": "OWG60swIRYTP38r8jsbksg", "heading": 346.54483, "description": ""}, {"pano_id": "dL6GvR3Vve1XORse6_bz2Q", "heading": 79.25409, "description": "\u6708\u5bd2\u901a"}, {"pano_id": "bcNoj4e44FpX4U2GaaKBmA", "heading": 261.13852, "description": "\u6708\u5bd2\u901a"}, {"pano_id": "Ns59_RBp1XqxlR-v2J6d1Q", "heading": 349.09, "distance": 11.32, "virtual": true}, {"pano_id": "iaghHrheW9GJpLCG0gVi_g", "heading": 261.5, "distance": 10.1, "virtual": true}, {"pano_id": "JqLZgFshR3cFoMsMHOpgYw", "heading": 173.18, "distance": 9.1, "virtual": true}]}, "FnACkLDLvS2qR7m2LhkTCw": {"lat": 43.05600656798273, "lng": 141.3523365953743, "links": [{"pano_id": "qav6BICgCZSbgzLvbo5tuA", "heading": 79.48418, "description": "\u90fd\u901a\u308a"}, {"pano_id": "pQeXRw68zfRq0lpq6wX2GA", "heading": 259.45395, "description": "\u90fd\u901a\u308a"}]}, "rPxVuSF9zcMn9ZN9pSn_rQ": {"lat": 43.05616593465391, "lng": 141.3499575859949, "links": [{"pano_id": "Pt-XCNnmOCWtw-FeGmhmHQ", "heading": 169.46808, "description": ""}, {"pano_id": "9vYbfGXtoUpeVIBYhmQCaA", "heading": 169.45, "distance": 16.96, "virtual": true}]}, "QdC0VhLApv0M6Uo4CluWMg": {"lat": 43.05646066641941, "lng": 141.3515270685439, "links": [{"pano_id": "LVRUdPE6aIuKCXeH5WEU2Q", "heading": 349.3606, "description": ""}, {"pano_id": "qy44vhfo4MYALtNszxtp6A", "heading": 171.1469, "description": ""}, {"pano_id": "-_8MWmM0SaxuPL3oBy4wow", "heading": 350.14, "distance": 8.72, "virtual": true}, {"pano_id": "tmnPOzAsWtbBeUgWIipktA", "heading": 277.31, "distance": 10.16, "virtual": true}]}, "ezv9y8iWZBoTrSJpPR321w": {"lat": 43.0553116019729, "lng": 141.3501232297817, "links": [{"pano_id": "YEKzH46gDOHH6swewioIlQ", "heading": 259.5883, "description": "\u6708\u5bd2\u901a"}, {"pano_id": "albK65JFoPx1FeudiMaYdA", "heading": 104.939606, "description": ""}, {"pano_id": "eszPvzP_2879B2vUJ_RZYg", "heading": 3.88, "distance": 17.02, "virtual": true}, {"pano_id": "-bAn1p9oqd6pql0plPK7LA", "heading": 20.02, "distance": 8.4, "virtual": true}, {"pano_id": "uRE8V0CqIA30241r0i6fUA", "heading": 78.83, "distance": 8.97, "virtual": true}, {"pano_id": "HyT4IvtkSnnOfRgD1O3hKg", "heading": 149.15, "distance": 11.97, "virtual": true}]}, "uRE8V0CqIA30241r0i6fUA": {"lat": 43.05532722906663, "lng": 141.3502315721902, "links": [{"pano_id": "l89RMJlBSnnt6FGhILaw3A", "heading": 78.13093, "description": "\u6708\u5bd2\u901a"}, {"pano_id": "albK65JFoPx1FeudiMaYdA", "heading": 235.0678, "description": ""}, {"pano_id": "eszPvzP_2879B2vUJ_RZYg", "heading": 333.34, "distance": 17.05, "virtual": true}, {"pano_id": "-bAn1p9oqd6pql0plPK7LA", "heading": 316.08, "distance": 8.54, "virtual": true}, {"pano_id": "ezv9y8iWZBoTrSJpPR321w", "heading": 258.83, "distance": 8.97, "virtual": true}, {"pano_id": "HyT4IvtkSnnOfRgD1O3hKg", "heading": 192.51, "distance": 12.31, "virtual": true}]}, "HyT4IvtkSnnOfRgD1O3hKg": {"lat": 43.05521919332008, "lng": 141.3501987724935, "links": [{"pano_id": "albK65JFoPx1FeudiMaYdA", "heading": 350.17407, "description": ""}, {"pano_id": "FlRhzjqwaFCbWSvJwdlnqA", "heading": 170.16566, "description": ""}, {"pano_id": "ezv9y8iWZBoTrSJpPR321w", "heading": 329.15, "distance": 11.97, "virtual": true}, {"pano_id": "uRE8V0CqIA30241r0i6fUA", "heading": 12.51, "distance": 12.31, "virtual": true}, {"pano_id": "cQBmUVIkgo1Gikb8fQFTpA", "heading": 187.04, "distance": 7.95, "virtual": true}, {"pano_id": "gV51EjT1b5GW9SPzOmB1Vw", "heading": 152.08, "distance": 7.93, "virtual": true}]}, "AJ_6mEG_CmcKExdVczHc3w": {"lat": 43.05561180045446, "lng": 141.3494145753697, "links": [{"pano_id": "FB1puTM0SbBH_z66rHZGKw", "heading": 79.53047, "description": ""}, {"pano_id": "Dfeh5B6yFMKTAaw-bWVDVA", "heading": 259.55667, "description": ""}]}, "bcNoj4e44FpX4U2GaaKBmA": {"lat": 43.05553149358636, "lng": 141.3517409250426, "links": [{"pano_id": "RVglXjFXjlE8H3wQaEa-8A", "heading": 81.13853, "description": "\u6708\u5bd2\u901a"}, {"pano_id": "iaghHrheW9GJpLCG0gVi_g", "heading": 261.55667, "description": "\u6708\u5bd2\u901a"}, {"pano_id": "Ns59_RBp1XqxlR-v2J6d1Q", "heading": 355.47, "distance": 11.34, "virtual": true}, {"pano_id": "OWG60swIRYTP38r8jsbksg", "heading": 8.63, "distance": 3.35, "virtual": true}, {"pano_id": "dL6GvR3Vve1XORse6_bz2Q", "heading": 79.44, "distance": 12.58, "virtual": true}, {"pano_id": "9198eDdHq1KqZynOchGhWw", "heading": 117.43, "distance": 1.31, "virtual": true}, {"pano_id": "JqLZgFshR3cFoMsMHOpgYw", "heading": 165.26, "distance": 9.15, "virtual": true}]}, "qav6BICgCZSbgzLvbo5tuA": {"lat": 43.05602221818561, "lng": 141.3524519813246, "links": [{"pano_id": "FnACkLDLvS2qR7m2LhkTCw", "heading": 259.48416, "description": "\u90fd\u901a\u308a"}, {"pano_id": "nxgSXiJtstRNEPntXpMgKQ", "heading": 79.4699, "description": "\u90fd\u901a\u308a"}]}, "LVRUdPE6aIuKCXeH5WEU2Q": {"lat": 43.05648807477432, "lng": 141.3515200218997, "links": [{"pano_id": "-_8MWmM0SaxuPL3oBy4wow", "heading": 350.5721, "description": ""}, {"pano_id": "QdC0VhLApv0M6Uo4CluWMg", "heading": 169.3606, "description": ""}, {"pano_id": "tmnPOzAsWtbBeUgWIipktA", "heading": 259.52863, "description": ""}, {"pano_id": "qy44vhfo4MYALtNszxtp6A", "heading": 170.68, "distance": 11.81, "virtual": true}]}, "dL6GvR3Vve1XORse6_bz2Q": {"lat": 43.05555222569084, "lng": 141.3518931687644, "links": [{"pano_id": "RVglXjFXjlE8H3wQaEa-8A", "heading": 259.2541, "description": "\u6708\u5bd2\u901a"}, {"pano_id": "Ns59_RBp1XqxlR-v2J6d1Q", "heading": 304.16, "distance": 16.03, "virtual": true}, {"pano_id": "OWG60swIRYTP38r8jsbksg", "heading": 274.83, "distance": 11.91, "virtual": true}, {"pano_id": "bcNoj4e44FpX4U2GaaKBmA", "heading": 259.44, "distance": 12.58, "virtual": true}, {"pano_id": "9198eDdHq1KqZynOchGhWw", "heading": 255.45, "distance": 11.58, "virtual": true}, {"pano_id": "JqLZgFshR3cFoMsMHOpgYw", "heading": 222.01, "distance": 15.01, "virtual": true}]}, "9198eDdHq1KqZynOchGhWw": {"lat": 43.05552606719468, "lng": 141.3517552308419, "links": [{"pano_id": "RVglXjFXjlE8H3wQaEa-8A", "heading": 6.051871, "description": "\u6708\u5bd2\u901a"}, {"pano_id": "JqLZgFshR3cFoMsMHOpgYw", "heading": 171.95094, "description": ""}, {"pano_id": "Ns59_RBp1XqxlR-v2J6d1Q", "heading": 350.2, "distance": 12.09, "virtual": true}, {"pano_id": "OWG60swIRYTP38r8jsbksg", "heading": 350.42, "distance": 3.97, "virtual": true}, {"pano_id": "bcNoj4e44FpX4U2GaaKBmA", "heading": 297.43, "distance": 1.31, "virtual": true}, {"pano_id": "dL6GvR3Vve1XORse6_bz2Q", "heading": 75.45, "distance": 11.58, "virtual": true}, {"pano_id": "iaghHrheW9GJpLCG0gVi_g", "heading": 265.99, "distance": 9.93, "virtual": true}]}, "FlRhzjqwaFCbWSvJwdlnqA": {"lat": 43.0551397894971, "lng": 141.350217609893, "links": [{"pano_id": "cQBmUVIkgo1Gikb8fQFTpA", "heading": 290.58337, "description": "\u6708\u5bd2\u901a"}, {"pano_id": "HyT4IvtkSnnOfRgD1O3hKg", "heading": 350.16568, "description": ""}, {"pano_id": "qhEIopEDXEVetDSTcSIBJw", "heading": 170.2724, "description": ""}, {"pano_id": "gV51EjT1b5GW9SPzOmB1Vw", "heading": 50.19097, "description": "\u6708\u5bd2\u901a"}]}, "Dfeh5B6yFMKTAaw-bWVDVA": {"lat": 43.05559692683391, "lng": 141.3493041371477, "links": [{"pano_id": "AJ_6mEG_CmcKExdVczHc3w", "heading": 79.55668, "description": ""}]}, "cQBmUVIkgo1Gikb8fQFTpA": {"lat": 43.05514824801479, "lng": 141.3501867853984, "links": [{"pano_id": "FlRhzjqwaFCbWSvJwdlnqA", "heading": 110.583374, "description": ""}, {"pano_id": "albK65JFoPx1FeudiMaYdA", "heading": 357.99, "distance": 16.96, "virtual": true}, {"pano_id": "HyT4IvtkSnnOfRgD1O3hKg", "heading": 7.04, "distance": 7.95, "virtual": true}, {"pano_id": "qhEIopEDXEVetDSTcSIBJw", "heading": 158.31, "distance": 11.14, "virtual": true}, {"pano_id": "gV51EjT1b5GW9SPzOmB1Vw", "heading": 79.37, "distance": 4.77, "virtual": true}]}, "l89RMJlBSnnt6FGhILaw3A": {"lat": 43.05534464936022, "lng": 141.3503450079734, "links": [{"pano_id": "uRE8V0CqIA30241r0i6fUA", "heading": 258.13092, "description": "\u6708\u5bd2\u901a"}, {"pano_id": "-bAn1p9oqd6pql0plPK7LA", "heading": 285.56, "distance": 15.72, "virtual": true}, {"pano_id": "albK65JFoPx1FeudiMaYdA", "heading": 250.01, "distance": 14.31, "virtual": true}]}, "iaghHrheW9GJpLCG0gVi_g": {"lat": 43.05551982290061, "lng": 141.351633325353, "links": [{"pano_id": "bcNoj4e44FpX4U2GaaKBmA", "heading": 81.55667, "description": "\u6708\u5bd2\u901a"}, {"pano_id": "Ns59_RBp1XqxlR-v2J6d1Q", "heading": 31.9, "distance": 14.85, "virtual": true}, {"pano_id": "OWG60swIRYTP38r8jsbksg", "heading": 63.52, "distance": 10.33, "virtual": true}, {"pano_id": "RVglXjFXjlE8H3wQaEa-8A", "heading": 81.5, "distance": 10.1, "virtual": true}, {"pano_id": "9198eDdHq1KqZynOchGhWw", "heading": 85.99, "distance": 9.93, "virtual": true}, {"pano_id": "JqLZgFshR3cFoMsMHOpgYw", "heading": 124.28, "distance": 13.4, "virtual": true}]}, "nxgSXiJtstRNEPntXpMgKQ": {"lat": 43.05603732663551, "lng": 141.3525632186259, "links": [{"pano_id": "qav6BICgCZSbgzLvbo5tuA", "heading": 259.4699, "description": "\u90fd\u901a\u308a"}]}, "-_8MWmM0SaxuPL3oBy4wow": {"lat": 43.05653794842433, "lng": 141.3515086879828, "links": [{"pano_id": "LVRUdPE6aIuKCXeH5WEU2Q", "heading": 170.57211, "description": ""}, {"pano_id": "W994F_8W6ImUW50sEMBnwA", "heading": 349.73392, "description": ""}, {"pano_id": "qy44vhfo4MYALtNszxtp6A", "heading": 170.64, "distance": 17.43, "virtual": true}, {"pano_id": "QdC0VhLApv0M6Uo4CluWMg", "heading": 170.14, "distance": 8.72, "virtual": true}, {"pano_id": "tmnPOzAsWtbBeUgWIipktA", "heading": 229.6, "distance": 11.27, "virtual": true}]}, "JqLZgFshR3cFoMsMHOpgYw": {"lat": 43.05545194872028, "lng": 141.3517695753092, "links": [{"pano_id": "9198eDdHq1KqZynOchGhWw", "heading": 351.95093, "description": ""}, {"pano_id": "OWG60swIRYTP38r8jsbksg", "heading": 351.46, "distance": 12.29, "virtual": true}, {"pano_id": "RVglXjFXjlE8H3wQaEa-8A", "heading": 353.18, "distance": 9.1, "virtual": true}, {"pano_id": "bcNoj4e44FpX4U2GaaKBmA", "heading": 345.26, "distance": 9.15, "virtual": true}, {"pano_id": "dL6GvR3Vve1XORse6_bz2Q", "heading": 42.01, "distance": 15.01, "virtual": true}, {"pano_id": "iaghHrheW9GJpLCG0gVi_g", "heading": 304.28, "distance": 13.4, "virtual": true}]}, "qhEIopEDXEVetDSTcSIBJw": {"lat": 43.05505514689055, "lng": 141.3502374679027, "links": [{"pano_id": "XL6XMmiz9ufOs_8K3U4QLw", "heading": 170.22685, "description": ""}, {"pano_id": "FlRhzjqwaFCbWSvJwdlnqA", "heading": 350.2724, "description": ""}, {"pano_id": "cQBmUVIkgo1Gikb8fQFTpA", "heading": 338.31, "distance": 11.14, "virtual": true}, {"pano_id": "gV51EjT1b5GW9SPzOmB1Vw", "heading": 2.91, "distance": 11.25, "virtual": true}]}, "YEKzH46gDOHH6swewioIlQ": {"lat": 43.05529110937414, "lng": 141.3499705982924, "links": [{"pano_id": "ezv9y8iWZBoTrSJpPR321w", "heading": 79.588295, "description": "\u6708\u5bd2\u901a"}, {"pano_id": "albK65JFoPx1FeudiMaYdA", "heading": 86.43, "distance": 17.0, "virtual": true}]}, "XL6XMmiz9ufOs_8K3U4QLw": {"lat": 43.05495338487995, "lng": 141.3502614562379, "links": [{"pano_id": "qhEIopEDXEVetDSTcSIBJw", "heading": 350.22684, "description": ""}]}, "W994F_8W6ImUW50sEMBnwA": {"lat": 43.05665576499604, "lng": 141.3514794838316, "links": [{"pano_id": "-_8MWmM0SaxuPL3oBy4wow", "heading": 169.7339, "description": ""}]}, "tmnPOzAsWtbBeUgWIipktA": {"lat": 43.0564722833053, "lng": 141.3514030881829, "links": [{"pano_id": "LVRUdPE6aIuKCXeH5WEU2Q", "heading": 79.52861, "description": ""}, {"pano_id": "qy44vhfo4MYALtNszxtp6A", "heading": 130.93, "distance": 15.11, "virtual": true}, {"pano_id": "QdC0VhLApv0M6Uo4CluWMg", "heading": 97.31, "distance": 10.16, "virtual": true}, {"pano_id": "-_8MWmM0SaxuPL3oBy4wow", "heading": 49.6, "distance": 11.27, "virtual": true}]}, "gV51EjT1b5GW9SPzOmB1Vw": {"lat": 43.05515615881004, "lng": 141.3502444893904, "links": [{"pano_id": "FlRhzjqwaFCbWSvJwdlnqA", "heading": 230.19098, "description": ""}, {"pano_id": "albK65JFoPx1FeudiMaYdA", "heading": 341.8, "distance": 16.91, "virtual": true}, {"pano_id": "HyT4IvtkSnnOfRgD1O3hKg", "heading": 332.08, "distance": 7.93, "virtual": true}, {"pano_id": "cQBmUVIkgo1Gikb8fQFTpA", "heading": 259.37, "distance": 4.77, "virtual": true}, {"pano_id": "qhEIopEDXEVetDSTcSIBJw", "heading": 182.91, "distance": 11.25, "virtual": true}]}};
        const targetPanos = ["8z9-5DpCmlF4dS5CTzm8HA", "LTjIvg3plbtzx_t73iFiPA"];
        const spawnPoints = ["XL6XMmiz9ufOs_8K3U4QLw", "AJ_6mEG_CmcKExdVczHc3w", "W994F_8W6ImUW50sEMBnwA", "nxgSXiJtstRNEPntXpMgKQ"];
        
        // Initialize map
        const map = L.map('map');
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);
        
        // Markers and lines
        const markers = {};
        const connectionLines = [];
        let selectedPano = null;
        
        // Create markers
        const bounds = [];
        Object.entries(panoData).forEach(([panoId, data]) => {
            const lat = data.lat;
            const lng = data.lng;
            bounds.push([lat, lng]);
            
            // Determine marker style
            let color = '#95a5a6';  // Default gray
            let radius = 6;
            let zIndex = 100;
            
            if (targetPanos.includes(panoId)) {
                color = '#e74c3c';  // Red for target
                radius = 10;
                zIndex = 300;
            } else if (spawnPoints.includes(panoId)) {
                color = '#3498db';  // Blue for spawn
                radius = 8;
                zIndex = 200;
            }
            
            const marker = L.circleMarker([lat, lng], {
                radius: radius,
                fillColor: color,
                color: '#333',
                weight: 1,
                opacity: 1,
                fillOpacity: 0.8
            }).addTo(map);
            
            marker.panoId = panoId;
            marker.originalColor = color;
            marker.on('click', () => selectPano(panoId));
            
            markers[panoId] = marker;
        });
        
        // Fit map to bounds
        if (bounds.length > 0) {
            map.fitBounds(bounds, { padding: [50, 50] });
        }
        
        // Select panorama function
        function selectPano(panoId) {
            // Clear previous selection
            clearSelection();
            
            selectedPano = panoId;
            const data = panoData[panoId];
            const links = data.links || [];
            
            // Highlight connected panos
            links.forEach(link => {
                const targetId = link.pano_id;
                if (markers[targetId]) {
                    markers[targetId].setStyle({ fillColor: '#2ecc71' });
                    
                    // Draw connection line
                    const line = L.polyline([
                        [data.lat, data.lng],
                        [panoData[targetId].lat, panoData[targetId].lng]
                    ], {
                        color: link.virtual ? '#e67e22' : '#27ae60',
                        weight: 2,
                        opacity: 0.7,
                        dashArray: link.virtual ? '5, 5' : null
                    }).addTo(map);
                    connectionLines.push(line);
                }
            });
            
            // Update info panel
            const infoDiv = document.getElementById('selected-info');
            const virtualCount = links.filter(l => l.virtual).length;
            const nativeCount = links.length - virtualCount;
            
            let typeStr = '';
            if (targetPanos.includes(panoId)) {
                typeStr = ' (Target)';
            } else if (spawnPoints.includes(panoId)) {
                typeStr = ' (Spawn)';
            }
            
            infoDiv.innerHTML = `
                <strong>Selected:</strong> ${panoId.substring(0, 20)}...${typeStr}<br>
                <strong>Connections:</strong> ${links.length}<br>
                <span style="color: #27ae60;">● Native: ${nativeCount}</span><br>
                <span style="color: #e67e22;">○ Virtual: ${virtualCount}</span>
            `;
        }
        
        // Clear selection
        function clearSelection() {
            // Reset marker colors
            Object.entries(markers).forEach(([panoId, marker]) => {
                marker.setStyle({ fillColor: marker.originalColor });
            });
            
            // Remove connection lines
            connectionLines.forEach(line => map.removeLayer(line));
            connectionLines.length = 0;
        }
        
        // Click on map to deselect
        map.on('click', (e) => {
            if (e.originalEvent.target === map._container) {
                clearSelection();
                document.getElementById('selected-info').innerHTML = 'Click a point to see connections';
            }
        });
    </script>
</body>
</html>
